<div class="continer" id="main-container">
  <ul class="nav nav-tabs mt-3">
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="dealing/contract">Contract Management</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="dealing/content">Content Management</a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" aria-current="page" href="dealing/license">License Managament</a>
    </li>
  </ul>

  <div class="container">
    <div class="row">
      <div class="col-12 mt-2">
        <div class="container mt-2">
          <div class="row">
            <div class="col-5">
              <input
                type="text"
                class="form-control"
                placeholder="License Name"
                aria-label="License Name"
                aria-describedby="basic-addon1"
              />
            </div>
            <div class="col-5">
              <button type="button" class="btn btn-outline-primary btn-sm mr-2">Filter</button>
            </div>
          </div>
        </div>
      </div>
      <div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <button
          type="button"
          class="btn btn-outline-primary btn-sm"
          data-bs-toggle="modal"
          data-bs-target="#addLicenseModal"
        >
          New License
        </button>
      </div>
    </div>
  </div>

  <!-- Add License Modal -->
  <form #addForm="ngForm" (ngSubmit)="onAddLicense(addForm)">
    <div
      class="modal fade"
      id="addLicenseModal"
      tabindex="-1"
      aria-labelledby="addLicenseModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addLicenseModalLabel">Add License</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="container mt-2">
              <div class="row">
                <div class="col-12">
                  <div class="input-group mb-3 mr-2">
                    <input
                      ngModel
                      type="text"
                      name="name"
                      class="form-control"
                      placeholder="License Name"
                      aria-label="License Name"
                      required
                    />
                  </div>
                </div>
                <div class="col-12">
                  <div class="input-group mb-3 mr-2">
                    <input
                      ngModel
                      name="start_time"
                      type="text"
                      class="form-control"
                      placeholder="Start Time"
                      aria-label="Start Time"
                      required
                    />
                  </div>
                  <div class="input-group mb-3 mr-2">
                    <input
                      ngModel
                      name="end_time"
                      type="text"
                      class="form-control"
                      placeholder="End Time"
                      aria-label="End Time"
                      required
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              id="add-license-form"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button [disabled]="addForm.invalid" type="submit" class="btn btn-primary">Save</button>
          </div>
        </div>
      </div>
    </div>
  </form>

  <!-- Delete Modal -->
  <div
    class="modal fade"
    id="deleteLicenseModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="deleteModelLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModelLabel">Delete License</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete license {{ deleteLicense?.name }}?</p>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
            <button
              (click)="onDeleteLicense(deleteLicense.id)"
              class="btn btn-danger"
              data-dismiss="modal"
            >
              Yes
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container-fluid mt-3">
    <table class="table table-bordered table-hover">
      <thead class="thead-lite">
        <tr>
          <th>name</th>
          <th>start time</th>
          <th>end time</th>
          <th style="text-align: center">options</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let license of licenses">
          <td>
            {{ license.name }}
          </td>
          <td>
            {{ license.start_time }}
          </td>
          <td>
            {{ license.end_time }}
          </td>

          <td style="text-align: center">
            <a
              (click)="onDeleteLicense(license.id)"
              class="btn btn-secondary tooltips"
              data-placement="top"
              data-original-title="Delete"
            >
              <i class="fa-solid fa-trash-can"></i>
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
